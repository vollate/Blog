<!DOCTYPE html>
<html  lang="en" >
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, maximum-scale=5, viewport-fit=cover">
    <title>CMake ä»å…¥é—¨åˆ°èƒ½ç”¨å°±è¡Œ | Vollate's Blog</title>
    <meta name="description" content="æ„å»ºç³»ç»Ÿå‘å±•å†å²  æ‰‹å·¥ç¼–è¯‘ (1950s - 1960s): ç¼–ç¨‹è¯­è¨€åˆšåˆšè¯ç”Ÿï¼Œç¨‹åºå‘˜éœ€è¦æ‰‹å·¥ç¼–è¯‘ç¨‹åºï¼Œå°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨ç ã€‚ æ‰¹å¤„ç†è„šæœ¬ (1960s - 1970s)ï¼š ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬æˆ– shell è„šæœ¬è‡ªåŠ¨åŒ–ç¼–è¯‘å‘½ä»¤ï¼Œå‡å°‘äº†æ‰‹å·¥è¾“å…¥ã€‚ Make ç³»ç»Ÿ (1970s)ï¼š Make å¼•å…¥äº†å¢é‡ç¼–è¯‘çš„æ¦‚å¿µï¼Œåªé‡æ–°ç¼–è¯‘ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚ é…ç½®å’Œç”Ÿæˆå·¥å…· (1980s - 1990s)ï¼š">
<meta property="og:type" content="article">
<meta property="og:title" content="CMake ä»å…¥é—¨åˆ°èƒ½ç”¨å°±è¡Œ">
<meta property="og:url" content="http://blog.vollate.top/2024/10/12/cmake-introduction/index.html">
<meta property="og:site_name" content="Vollate&#39;s Blog">
<meta property="og:description" content="æ„å»ºç³»ç»Ÿå‘å±•å†å²  æ‰‹å·¥ç¼–è¯‘ (1950s - 1960s): ç¼–ç¨‹è¯­è¨€åˆšåˆšè¯ç”Ÿï¼Œç¨‹åºå‘˜éœ€è¦æ‰‹å·¥ç¼–è¯‘ç¨‹åºï¼Œå°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨ç ã€‚ æ‰¹å¤„ç†è„šæœ¬ (1960s - 1970s)ï¼š ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬æˆ– shell è„šæœ¬è‡ªåŠ¨åŒ–ç¼–è¯‘å‘½ä»¤ï¼Œå‡å°‘äº†æ‰‹å·¥è¾“å…¥ã€‚ Make ç³»ç»Ÿ (1970s)ï¼š Make å¼•å…¥äº†å¢é‡ç¼–è¯‘çš„æ¦‚å¿µï¼Œåªé‡æ–°ç¼–è¯‘ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚ é…ç½®å’Œç”Ÿæˆå·¥å…· (1980s - 1990s)ï¼š">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://blog.vollate.top/2024/10/12/cmake-introduction/Image_1728729096791.jpg">
<meta property="article:published_time" content="2024-10-12T17:49:55.000Z">
<meta property="article:modified_time" content="2024-10-13T04:39:25.000Z">
<meta property="article:author" content="Vollate">
<meta property="article:tag" content="CMake">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://blog.vollate.top/2024/10/12/cmake-introduction/Image_1728729096791.jpg">

    <link rel="alternate" type="application/atom+xml" href="/atom.xml">
    <link rel="icon" href="/images/favicon.ico" type="image/x-icon">

    
<link rel="stylesheet" href="/css/common.min.css">



    
    
    
        <link href="//cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.css" rel="stylesheet">
    
    
        <link href="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/css/lightgallery.min.css" rel="stylesheet">
    
    
    
<link rel="stylesheet" href="/css/iconfont.min.css">

    
<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>

    <body>
        <header class="header header-fixture">
    <div class="profile-search-wrap flex sm:block">
        
        
        <div class="profile sm:text-center md:px-1 lg:px-3 sm:pb-4 sm:pt-6">
            <a id="avatar" role="link" href="https://github.com/vollate" class="inline-block lg:w-16 lg:h-16 w-8 h-8 m-2" target="_blank" rel="noopener" rel="noreferrer" >
                <img src="/about/avatar.jpg" class="rounded-full" alt="avatar">
            </a>
            <h2 id="name" class="hidden lg:block">Vollate</h2>
            <h3 id="title" class="hidden lg:block">Student</h3>
            
            <small id="location" class="hidden lg:block">
                <i class="iconfont icon-map-icon"></i>
                Shenzhen, China
            </small>
            
        </div>
        
        
<div class="search flex-1 flex lg:inline-block sm:hidden lg:px-4 lg:mt-2 lg:mb-4 lg:w-full">
    <form id="search-form" class="my-auto flex-1 lg:border lg:border-solid lg:border-gray-200">
        <div class="input-group table bg-gray-100 lg:bg-white w-full">
            <input id="search-input" type="text" placeholder="Search" class="inline-block w-full bg-gray-100 lg:bg-white p-1">
            <span class="table-cell">
                <button name="search tigger button" disabled>
                    <i class="iconfont icon-search m-2"></i>
                </button>
            </span>
        </div>
    </form>
        
<div id="content-json" data-placeholder="Search" class="invisible hidden">/content.json</div>
<script id="search-teamplate" type="text/html" data-path="/content.json">
    <div>
        <div class="search-header bg-gray-400">
            <input id="actual-search-input" model="keyword" ref="input" class="inline-block w-full h-10 px-2 py-1" placeholder="Search" type="text">
        </div>
        <div class="search-result bg-gray-200">
            {{#each searchPosts}}
            <a href="/{{ path }}" class="result-item block px-2 pb-3 mb-1 pt-1 hover:bg-indigo-100">
                <i class="iconfont icon-file"></i>
                <h1 class="result-title inline font-medium text-lg">{{ title }}</h1>
                <p class="result-content text-gray-600 text-sm">{{{ text }}}</p>
            </a>
            {{/each}}
        </div>
    </div>
</script>

</div>


        <button name="menu toogle button" id="menu-toggle-btn" class="block sm:hidden p-3" role="button" aria-expanded="false">
            <i class="iconfont icon-hamburger"></i>
        </button>
    </div>
    <nav id="menu-nav" class="hidden sm:flex flex-col">
        
        
            <div class="menu-item menu-home" role="menuitem">
                <a href="/.">
                    <i class="iconfont icon-home" aria-hidden="true"></i>
                    <span class="menu-title">Home</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-archives" role="menuitem">
                <a href="/archives">
                    <i class="iconfont icon-archive" aria-hidden="true"></i>
                    <span class="menu-title">Archives</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-categories" role="menuitem">
                <a href="/categories">
                    <i class="iconfont icon-folder" aria-hidden="true"></i>
                    <span class="menu-title">Categories</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-tags" role="menuitem">
                <a href="/tags">
                    <i class="iconfont icon-tag" aria-hidden="true"></i>
                    <span class="menu-title">Tags</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-repository" role="menuitem">
                <a href="/repository">
                    <i class="iconfont icon-project" aria-hidden="true"></i>
                    <span class="menu-title">Repository</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-links" role="menuitem">
                <a href="/links">
                    <i class="iconfont icon-friend" aria-hidden="true"></i>
                    <span class="menu-title">Links</span>
                </a>
            </div>
        
        
            <div class="menu-item menu-about" role="menuitem">
                <a href="/about">
                    <i class="iconfont icon-cup" aria-hidden="true"></i>
                    <span class="menu-title">About</span>
                </a>
            </div>
        
        
<div class="social-links flex sm:flex-col lg:hidden mt-5">
    
        <span class="social-item text-center">
            <a target="_blank" rel="noopener" href="https://github.com/vollate">
                <i class="iconfont social-icon icon-github"></i>
                <span class="menu-title hidden lg:inline">menu.github</span>
            </a>
        </span>
    
        <span class="social-item text-center">
            <a href="/atom.xml">
                <i class="iconfont social-icon icon-rss"></i>
                <span class="menu-title hidden lg:inline">menu.rss</span>
            </a>
        </span>
    
</div>


    </nav>
</header>

        <section class="main-section">
            
    <main class="flex-1 px-4 py-14 md:px-5 lg:px-8 lg:py-4 relative min-h-screen">
    

    <article class="content article article-archives article-type-list" itemscope="">
        <header class="article-header">
            
    
        <h1 class="article-title text-lg" itemprop="name">
            CMake ä»å…¥é—¨åˆ°èƒ½ç”¨å°±è¡Œ
        </h1>
    



            <p class="article-meta mb-3 text-xs">
                <span class="article-date">
    
    <i class="iconfont icon-calendar-minus-o"></i>
	<a href="/2024/10/12/cmake-introduction/" class="article-date">
	  <time datetime="2024-10-12T00:00:00.000Z"
            itemprop="datePublished">Created: Oct 12</time>
        
            <i class="iconfont icon-calendar-check"></i>
            <time datetime="2024-10-13T00:00:00.000Z"
                  itemprop="dateModified">Last Updated: Oct 13</time>
        
    </a>
</span>
                
    <span class="article-category">
    <i class="iconfont icon-folder"></i>
    <a class="article-category-link" href="/categories/Knowledge/">Knowledge</a>
  </span>


                
    <span class="article-tags">
    <i class="iconfont icon-tag"></i>
    <a class="article-tag-none-link" href="/tags/CMake/" rel="tag">CMake</a>
  </span>


                <span class="_partial/post-comment"><i class="icon icon-comment"></i>
                    <a href="/2024/10/12/cmake-introduction/#comments" class="article-comment-link">
                        Comments
                    </a>
                </span>
                
    
        <span class="post-wordcount" itemprop="wordCount">Word Count: 2.5k(words)</span>
    
    
        <span class="post-readcount"
              itemprop="timeRequired">Read Count: 16(minutes)</span>
    


            </p>
        </header>
        <div class="marked-body article-body">
            <h2 id="æ„å»ºç³»ç»Ÿå‘å±•å†å²">æ„å»ºç³»ç»Ÿå‘å±•å†å²</h2>
<ol>
<li>æ‰‹å·¥ç¼–è¯‘ (1950s - 1960s): ç¼–ç¨‹è¯­è¨€åˆšåˆšè¯ç”Ÿï¼Œç¨‹åºå‘˜éœ€è¦æ‰‹å·¥ç¼–è¯‘ç¨‹åºï¼Œå°†æºä»£ç è½¬æ¢ä¸ºæœºå™¨ç ã€‚</li>
<li>æ‰¹å¤„ç†è„šæœ¬ (1960s - 1970s)ï¼š ä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬æˆ– shell è„šæœ¬è‡ªåŠ¨åŒ–ç¼–è¯‘å‘½ä»¤ï¼Œå‡å°‘äº†æ‰‹å·¥è¾“å…¥ã€‚</li>
<li>Make ç³»ç»Ÿ (1970s)ï¼š Make å¼•å…¥äº†å¢é‡ç¼–è¯‘çš„æ¦‚å¿µï¼Œåªé‡æ–°ç¼–è¯‘ä¿®æ”¹è¿‡çš„æ–‡ä»¶ï¼Œå¤§å¹…æå‡æ•ˆç‡ã€‚</li>
<li>é…ç½®å’Œç”Ÿæˆå·¥å…· (1980s - 1990s)ï¼š Autotools ç­‰å·¥å…·é€šè¿‡è‡ªåŠ¨ç”Ÿæˆè·¨å¹³å°çš„æ„å»ºè„šæœ¬ï¼Œæ”¯æŒå¤šå¹³å°å¼€å‘ï¼Œé¿å…äº†æ‰‹å†™ Makefile çš„æƒ…å†µã€‚</li>
<li>ç°ä»£æ„å»ºç³»ç»Ÿ (2000s - 2010s)ï¼š CMake å’Œ Meson ç­‰å·¥å…·é‡‡ç”¨å£°æ˜å¼è¯­æ³•ï¼Œç®€åŒ–äº†å¤æ‚é¡¹ç›®çš„æ„å»ºè¿‡ç¨‹ã€‚</li>
<li>ä¸“ç”¨æ„å»ºç³»ç»Ÿå’Œæ„å»ºå·¥å…·é“¾ (2010s - Present)ï¼šNinjaã€Gradleã€Bazelã€Buck ç­‰ä¸“æ³¨äºåŠ é€Ÿå¤§å‹é¡¹ç›®çš„æ„å»ºï¼Œæä¾›é«˜åº¦çš„è‡ªå®šä¹‰åŠŸèƒ½ã€‚</li>
<li>äº‘åŸç”Ÿå’Œåˆ†å¸ƒå¼æ„å»º (2010s - Now)ï¼š æ”¯æŒäº‘åŸç”Ÿå’Œåˆ†å¸ƒå¼å¼€å‘åœºæ™¯çš„æ„å»ºç³»ç»Ÿï¼Œé›†æˆäº†å®¹å™¨åŒ–å’Œ CI/CD å·¥å…·ã€‚</li>
</ol>
<br/>
<p><strong>å¢é‡ç¼–è¯‘</strong>æ˜¯æŒ‡æ¯æ¬¡åªç¼–è¯‘ä¿®æ”¹è¿‡çš„ç¼–è¯‘å•å…ƒï¼Œé¿å…äº†æ— æ•ˆç¼–è¯‘ã€‚<br>
ä¾‹å¦‚ï¼Œåœ¨ C/C++ ä¸­ï¼Œæ¯ä¸ªæºæ–‡ä»¶å¯¹åº”ä¸€ä¸ªç¼–è¯‘å•å…ƒï¼Œåªæœ‰ä¿®æ”¹è¿‡çš„æºæ–‡ä»¶æ‰éœ€è¦é‡æ–°ç¼–è¯‘ã€‚åŒæ—¶ç”±äºé¢„å¤„ç†çš„åŸå› ï¼Œå¤´æ–‡ä»¶çš„å˜æ›´ä¼šé€’å½’å½±å“åˆ°æ‰€æœ‰ç›´æ¥æˆ–é—´æ¥å¼•ç”¨è¯¥å¤´æ–‡ä»¶çš„æºæ–‡ä»¶ã€‚</p>
<h2 id="GNU-Make">GNU Make</h2>
<p>Make æ˜¯ä¸€ä¸ªæ„å»ºå·¥å…·ï¼Œé€šè¿‡ Makefile æ–‡ä»¶å®šä¹‰é¡¹ç›®çš„æ„å»ºè§„åˆ™ã€‚Makefile æ–‡ä»¶åŒ…å«äº†ä¸€ç³»åˆ—è§„åˆ™ï¼Œæ¯ä¸ªè§„åˆ™ç”±ä¸€ä¸ªç›®æ ‡ã€ä¾èµ–å’Œå‘½ä»¤ç»„æˆã€‚</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Variable</span></span><br><span class="line">CC = clang</span><br><span class="line">CFLAGS = -Wall -Wextra -Werror</span><br><span class="line"></span><br><span class="line"><span class="comment"># Target</span></span><br><span class="line"><span class="section">all: program</span></span><br><span class="line"></span><br><span class="line"><span class="section">foo.o: foo.c</span></span><br><span class="line">  <span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -c foo.c -o <span class="variable">$@</span></span><br><span class="line"><span class="comment"># $@ refers to the target</span></span><br><span class="line"><span class="comment"># $&lt; refers to the first dependency</span></span><br><span class="line"><span class="comment"># $^ refers to all dependencies</span></span><br><span class="line"></span><br><span class="line"><span class="section">main.o: main.c</span></span><br><span class="line">  <span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> -c main.c -o <span class="variable">$@</span></span><br><span class="line"></span><br><span class="line"><span class="section">program: main.o foo.o</span></span><br><span class="line">  <span class="variable">$(CC)</span> <span class="variable">$(CFLAGS)</span> main.o foo.o -o program</span><br><span class="line"></span><br><span class="line"><span class="keyword">include</span> subdir/Makefile</span><br></pre></td></tr></table></figure>
<p>make æ˜¯ä¸€ä¸ªè¿‡ç¨‹åŒ–çš„æ„å»ºå·¥å…·ï¼Œéœ€è¦æ‰‹åŠ¨ä¹¦å†™æ„å»ºå‘½ä»¤ï¼Œçµæ´»åº¦é«˜ä½†å¯ç»´æŠ¤æ€§å·®ã€‚</p>
<h2 id="CMake">CMake</h2>
<p>CMake ä½œä¸ºå…ƒæ„å»ºç³»ç»Ÿï¼Œå¯ä»¥ç”Ÿæˆ Makeã€Ninjaã€Visual Studio ç­‰æ„å»ºç³»ç»Ÿæ‰€éœ€çš„é…ç½®æ–‡ä»¶ï¼Œæ–¹ä¾¿çš„å®ç°é¡¹ç›®çš„è·¨å¹³å°ã€‚CMake çš„é…ç½®æ–‡ä»¶æ˜¯ CMakeLists.txtï¼Œé€šè¿‡ç¼–å†™ CMakeLists.txt æ–‡ä»¶ï¼Œå¯ä»¥å®šä¹‰é¡¹ç›®çš„æ„å»ºè§„åˆ™ã€‚</p>
<h3 id="Version">Version</h3>
<p>cmake ä¸åŒç‰ˆæœ¬ä¹‹é—´çš„å‘½ä»¤å¯èƒ½æœ‰æ‰€ä¸åŒï¼Œæ–°ç‰ˆå¯èƒ½ä¼šæ·»åŠ æ–°çš„å‘½ä»¤ï¼Œå¹¶ä¸”ä¼šåºŸå¼ƒä¸€äº›æ—§çš„å‘½ä»¤ï¼ˆä½†å¤§éƒ¨åˆ†æƒ…å†µä»ç„¶å¯ç”¨ï¼‰, æ‰€ä»¥åœ¨ç¼–å†™ CMakeLists.txt æ–‡ä»¶æ—¶ï¼Œéœ€è¦é™å®š CMake çš„æœ€ä½ç‰ˆæœ¬ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cmake_minimum_required</span>(VERSION <span class="number">3.16</span>) <span class="comment"># minimum cmake version</span></span><br><span class="line"><span class="comment"># This is a line comment in cmake</span></span><br><span class="line"><span class="comment">#[[ This is a block comment in cmake ]]</span></span><br></pre></td></tr></table></figure>
<h3 id="Project">Project</h3>
<p>Project å‘½ä»¤ç”¨äºå®šä¹‰é¡¹ç›®çš„åç§°å’Œæ”¯æŒçš„è¯­è¨€ã€‚å¯¹äºæ”¯æŒçš„è¯­è¨€ï¼Œå¯ä»¥ä½¿ç”¨ Cã€CXXã€CUDAã€Fortranã€ASM ç­‰ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCMake ä¼šè‡ªåŠ¨æ£€æµ‹é¡¹ç›®ä¸­çš„æºæ–‡ä»¶ï¼Œå¹¶æ ¹æ®æ–‡ä»¶åç¼€åæ¨æ–­è¯­è¨€ç±»å‹ã€‚</p>
<p>Project æ”¯æŒè®¾ç½®é¡¹ç›®çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥é€šè¿‡ VERSION é€‰é¡¹æŒ‡å®šé¡¹ç›®çš„ç‰ˆæœ¬å·ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">project</span>(hello_world) <span class="comment"># project name</span></span><br><span class="line"><span class="keyword">project</span>(hello_wrold VERSION <span class="number">5.14</span> LANGUAGES CXX CUDA) <span class="comment"># project name with languages</span></span><br></pre></td></tr></table></figure>
<h3 id="Variable">Variable</h3>
<p>CMake ä¸­çš„å˜é‡åˆ†ä¸ºå¦‚ä¸‹å‡ ç§ï¼šæ™®é€šå˜é‡ï¼Œç¼“å­˜å˜é‡ï¼Œç¯å¢ƒå˜é‡ã€‚<br>
æ™®é€šå˜é‡ä»…åœ¨æœ¬æ¬¡è¿è¡ŒcmakeæœŸé—´æœ‰æ•ˆï¼›ç¼“å­˜å˜é‡ä¼šè¢«å­˜å‚¨åˆ°ç”Ÿæˆé¡¹ç›®ç›®å½•çš„ CMakeCache.txt æ–‡ä»¶ä¸­ï¼Œç”¨é€”ä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>é¿å…ç”¨æˆ·å†æ¬¡è¿è¡Œ cmake é‡æ–°è®¾ç½®å˜é‡</li>
<li>å­˜å‚¨æŸäº›è¿è¡Œæ—¶ä¿¡æ¯ï¼Œå¯¹ç”¨æˆ·ä¸å¯è§ã€‚å¦‚ç³»ç»Ÿåº“çš„è·¯å¾„ã€ç¼–è¯‘å™¨çš„è·¯å¾„ç­‰ã€‚</li>
</ul>
<p>ç¯å¢ƒå˜é‡å–å†³äºè¿è¡Œ cmake çš„ç¯å¢ƒ</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>(SRC_FILES main.cpp lib.cpp) <span class="comment"># set Variable</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD <span class="number">17</span>) <span class="comment"># set Variable</span></span><br><span class="line"><span class="keyword">set</span>(CMAKE_CXX_STANDARD_REQUIRED <span class="keyword">ON</span> cache) <span class="comment"># set Cache Variable</span></span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;CMAKE_CXX_STANDARD: $&#123;CMAKE_CXX_STANDARD&#125;&quot;</span>) <span class="comment"># print message</span></span><br><span class="line"><span class="keyword">message</span>(WARNING <span class="string">&quot;$ENV&#123;USER&#125;&quot;</span>) <span class="comment"># print warning message</span></span><br><span class="line"><span class="keyword">message</span>(ERROR <span class="string">&quot;Error message&quot;</span>) <span class="comment"># print error message</span></span><br></pre></td></tr></table></figure>
<p>CMAKE ä¸­ï¼Œæ‰€æœ‰å˜é‡éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè®¿é—®ä¸å­˜åœ¨çš„å˜é‡ä¼šè¿”å›ç©ºï¼ˆä¸æ˜¯ç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œå¦‚æœæ— æ³•æ­£å¸¸å¤„ç†ä¼šäº§ç”Ÿé—®é¢˜ã€‚å› æ­¤å¸¸ç”¨çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>if</code> åˆ¤æ–­å˜é‡æ˜¯å¦å­˜åœ¨ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="keyword">DEFINED</span> CMAKE_CXX_STANDARD)</span><br><span class="line">  <span class="keyword">message</span>(STATUS <span class="string">&quot;CMAKE_CXX_STANDARD: $&#123;CMAKE_CXX_STANDARD&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  <span class="keyword">message</span>(WARNING <span class="string">&quot;CMAKE_CXX_STANDARD is not defined&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>
<p>åœ¨æ¯”è¾ƒæ—¶ï¼Œåˆ™å¯ä»¥ç›´æ¥åŠ ä¸Šå¼•å·ï¼Œè¿™æ ·å³ä½¿å˜é‡ä¸å­˜åœ¨ä¹Ÿä¸ä¼šæŠ¥é”™ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="string">&quot;$&#123;CMAKE_CXX_STANDARD&#125;&quot;</span> <span class="keyword">STREQUAL</span> <span class="string">&quot;17&quot;</span>)</span><br><span class="line">  <span class="keyword">message</span>(STATUS <span class="string">&quot;CMAKE_CXX_STANDARD is 17&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  <span class="keyword">message</span>(WARNING <span class="string">&quot;CMAKE_CXX_STANDARD is not 17&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>
<h3 id="Control-Flow">Control Flow</h3>
<p>åŒå¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€ä¸€æ ·ï¼ŒCMake ä¹Ÿæ”¯æŒæ¡ä»¶åˆ¤æ–­å’Œå¾ªç¯æ§åˆ¶ã€‚</p>
<h4 id="if">if</h4>
<p>if è¯­å¥æ”¯æŒ ANDã€ORã€NOT é€»è¾‘è¿ç®—ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨ PARENT_SCOPE é€‰é¡¹å°†å˜é‡ä¼ é€’åˆ°çˆ¶ä½œç”¨åŸŸã€‚</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(CMAKE_CXX_STANDARD <span class="keyword">EQUAL</span> <span class="number">17</span> <span class="keyword">OR</span> ENABLE_CXX17)</span><br><span class="line">  <span class="keyword">message</span>(STATUS <span class="string">&quot;CMAKE_CXX_STANDARD is 17&quot;</span>)</span><br><span class="line"><span class="keyword">elseif</span>(CMAKE_CXX_STANDARD <span class="keyword">EQUAL</span> <span class="number">14</span> <span class="keyword">AND</span> CMAKE_CXX_STANDARD_REQUIRED)</span><br><span class="line">  <span class="keyword">message</span>(STATUS <span class="string">&quot;CMAKE_CXX_STANDARD is 14&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  <span class="keyword">message</span>(WARNING <span class="string">&quot;CMAKE_CXX_STANDARD is not 17 or 14&quot;</span>) </span><br><span class="line"><span class="keyword">endif</span>()</span><br></pre></td></tr></table></figure>
<p>ä»»ä½•ç©ºå­—ç¬¦ä¸²ã€0ã€FALSEã€NOTFOUNDã€OFFã€NOã€Nã€IGNOREã€æ— å®šä¹‰çš„å˜é‡éƒ½ä¼šè¢«è§†ä¸ºå‡ï¼Œå…¶ä»–å€¼éƒ½ä¼šè¢«è§†ä¸ºçœŸã€‚</p>
<h4 id="loop">loop</h4>
<p>CMake æ”¯æŒ FOREACHã€WHILEã€WHILEã€UNTIL å¾ªç¯ï¼Œå…¶ä¸­ FOREACH å¾ªç¯æœ€ä¸ºå¸¸ç”¨ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span>(SRC_FILES main.cpp lib.cpp a.cpp b.cpp)</span><br><span class="line"><span class="keyword">foreach</span>(<span class="keyword">file</span> <span class="variable">$&#123;SRC_FILES&#125;</span>)</span><br><span class="line">  <span class="keyword">message</span>(STATUS <span class="string">&quot;Source file: $&#123;file&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">endforeach</span>()</span><br></pre></td></tr></table></figure>
<h3 id="Subdir">Subdir</h3>
<p>CMake æ”¯æŒå­ç›®å½•ï¼Œå¯ä»¥é€šè¿‡ add_subdirectory å‘½ä»¤æ·»åŠ å­ç›®å½•ï¼Œå­ç›®å½•ä¸­çš„ CMakeLists.txt æ–‡ä»¶ä¼šè¢«æ‰§è¡Œã€‚</p>
<p>egï¼šå‡è®¾é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ 1</span><br><span class="line">â”‚Â Â  â””â”€â”€ CMakeLists.txt</span><br><span class="line">â”œâ”€â”€ 2</span><br><span class="line">â”‚Â Â  â””â”€â”€ CMakeLists.txt</span><br><span class="line">â””â”€â”€ CMakeLists.txt</span><br></pre></td></tr></table></figure>
<p>æ ¹ç›®å½•çš„ CMakeLists.txt æ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">project</span>(foo)</span><br><span class="line"><span class="keyword">set</span>(useless <span class="string">&quot;root&quot;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Root: $&#123;useless&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">add_subdirectory</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Root: $&#123;useless&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">add_subdirectory</span>(<span class="number">2</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Root: $&#123;useless&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Root: $&#123;useless2&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>1/CMakeLists.txt æ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Dir1: $&#123;useless&#125;&quot;</span>)</span><br><span class="line"><span class="keyword">set</span>(useless <span class="string">&quot;dir1&quot;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Dir1: $&#123;useless&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>2/CMakeLists.txt æ–‡ä»¶å¦‚ä¸‹</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span>(useless <span class="string">&quot;dir2&quot;</span> PARENT_SCOPE)</span><br><span class="line"><span class="keyword">set</span>(useless2 <span class="string">&quot;dir2&quot;</span>)</span><br><span class="line"><span class="keyword">message</span>(STATUS <span class="string">&quot;Dir2: $&#123;useless2&#125;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œ<code>cmake -Bbuild</code> è¾“å‡ºå¦‚ä¸‹</p>
<figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// something</span><br><span class="line">-- Root: root</span><br><span class="line">-- Dir1: root</span><br><span class="line">-- Dir1: dir1</span><br><span class="line">-- Root: root</span><br><span class="line">-- Dir2: dir2</span><br><span class="line">-- Root: dir2</span><br><span class="line">-- Root:</span><br><span class="line">// something</span><br></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå­ç›®å½•ä¸­çš„å˜é‡ä¸ä¼šå½±å“åˆ°çˆ¶ç›®å½•ï¼Œä½†æ˜¯å¯ä»¥é€šè¿‡ PARENT_SCOPE é€‰é¡¹å°†å˜é‡ä¼ é€’åˆ°çˆ¶ç›®å½•ã€‚å­ç›®å½•è°ƒç”¨å®Œæˆåï¼Œè¿”å›åˆ°çˆ¶ç›®å½•ï¼Œç»§ç»­æ‰§è¡Œã€‚</p>
<p>CMake æ”¯æŒ include å‘½ä»¤ï¼Œå¯ä»¥åŒ…å«å…¶ä»– CMakeLists.txt æ–‡ä»¶ã€‚include å‘½ä»¤ä¼šå°†è¢«åŒ…å«çš„æ–‡ä»¶çš„å†…å®¹ç›´æ¥æ’å…¥åˆ°å½“å‰æ–‡ä»¶ä¸­ï¼Œå› æ­¤è¢«åŒ…å«çš„æ–‡ä»¶ä¸­å®šä¹‰çš„å˜é‡ä¼šå½±å“åˆ°åŒ…å«çš„æ–‡ä»¶ã€‚å’Œ C/CPPçš„é¢„å¤„ç†#include ä½œç”¨ç›¸åŒã€‚</p>
<h3 id="Executable-Lib">Executable/Lib</h3>
<p>CMake ä¸­æ”¯æŒä¸‰ç§ç±»å‹çš„æ„å»ºç›®æ ‡ï¼šå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆadd_executableï¼‰ã€é™æ€åº“ï¼ˆadd_library STATICï¼‰ã€åŠ¨æ€åº“ï¼ˆadd_library SHAREDï¼‰ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">add_executable</span>(hello_world main.cpp) <span class="comment"># add executable target</span></span><br><span class="line"><span class="keyword">add_library</span>(hello STATIC lib.cpp) <span class="comment"># add static library target</span></span><br><span class="line"><span class="keyword">add_library</span>(hello SHARED lib.cpp) <span class="comment"># add shared library target</span></span><br></pre></td></tr></table></figure>
<h3 id="include-directories">include_directories</h3>
<p>include_directories å‘½ä»¤ç”¨äºæ·»åŠ å¤´æ–‡ä»¶æœç´¢è·¯å¾„ï¼Œå¯ä»¥æ·»åŠ å¤šä¸ªè·¯å¾„ã€‚ä½¿ç”¨ BEFORE é€‰é¡¹å¯ä»¥å°†è·¯å¾„æ·»åŠ åˆ°å·²æœ‰è·¯å¾„çš„å‰é¢ï¼Œæ”¾ç½®è¢«å…¶ä»–è·¯å¾„è¦†ç›–ã€‚</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">include_directories</span>(<span class="keyword">include</span>/foo) <span class="comment"># add include path</span></span><br><span class="line"><span class="keyword">include_directories</span>(BEFORE <span class="keyword">include</span>/bar) <span class="comment"># add include path before</span></span><br></pre></td></tr></table></figure>
<h3 id="target-xxx">target_xxx</h3>
<p>target_xxx ç³»åˆ—å‘½ä»¤ç”¨äºè®¾ç½®ç›®æ ‡çš„å±æ€§ï¼Œå¦‚ç¼–è¯‘é€‰é¡¹ã€é“¾æ¥é€‰é¡¹ã€ä¾èµ–ç­‰ã€‚åˆ†ä¸ºä¸‰ç§å±æ€§ï¼šPRIVATE, PUBLIC, INTERFACEã€‚</p>
<ul>
<li>PRIVATE å±æ€§åªå¯¹å½“å‰ç›®æ ‡æœ‰æ•ˆ, ä¸ä¼šä¼ é€’ç»™ä¾èµ–ç›®æ ‡</li>
<li>PUBLIC å±æ€§å¯¹å½“å‰ç›®æ ‡å’Œä¾èµ–ç›®æ ‡éƒ½æœ‰æ•ˆ</li>
<li>INTERFACE å±æ€§åªå¯¹ä¾èµ–ç›®æ ‡æœ‰æ•ˆ,ä¸ä¼šå¯¹å½“å‰ç›®æ ‡æœ‰æ•ˆ</li>
</ul>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">target_include_directories</span>(hello PUBLIC <span class="keyword">include</span>) <span class="comment"># add include path for target hello and any target that depends on hello</span></span><br><span class="line"><span class="keyword">target_compile_definitions</span>(hello PRIVATE DEBUG) <span class="comment"># add compile definition for target hello</span></span><br><span class="line"><span class="keyword">target_link_libraries</span>(hello INTERFACE foo) <span class="comment"># link library foo to targets who depends on hello</span></span><br></pre></td></tr></table></figure>
<p>å¸¸ç”¨çš„ target_xxx å‘½ä»¤æœ‰ï¼š</p>
<ul>
<li>target_include_directories æ·»åŠ å¤´æ–‡ä»¶æœç´¢è·¯å¾„</li>
<li>target_compile_definitions æ·»åŠ ç¼–è¯‘å®å®šä¹‰</li>
<li>target_compile_options æ·»åŠ ç¼–è¯‘é€‰é¡¹</li>
<li>target_link_libraries æ·»åŠ é“¾æ¥åº“</li>
</ul>
<h3 id="find-package">find_package</h3>
<p>find_package å‘½ä»¤ç”¨äºæŸ¥æ‰¾å¤–éƒ¨åº“ï¼Œæœ‰å¦‚ä¸‹å‡ ç§æ¨¡å¼ï¼š</p>
<ul>
<li>Module æ¨¡å¼ï¼šåœ¨æŒ‡å®šçš„è·¯å¾„ä¸‹æŸ¥æ‰¾ Find<package>.cmake æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†æŸ¥æ‰¾åº“çš„è§„åˆ™ï¼Œå¦‚ä½•è®¾ç½®åº“çš„å¤´æ–‡ä»¶è·¯å¾„ã€åº“æ–‡ä»¶è·¯å¾„ã€é“¾æ¥åº“ç­‰ã€‚</li>
<li>Config æ¨¡å¼ï¼šåœ¨æŒ‡å®šçš„è·¯å¾„ä¸‹æŸ¥æ‰¾ <package>Config.cmakeæˆ–<lower-case-package>-config.cmake æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«äº†åº“çš„é…ç½®ä¿¡æ¯ï¼Œå¦‚å¤´æ–‡ä»¶è·¯å¾„ã€åº“æ–‡ä»¶è·¯å¾„ã€é“¾æ¥åº“ç­‰ã€‚</li>
</ul>
<p>å…¶ä»–å¯é€‰é¡¹</p>
<ul>
<li><code>REQUIRED</code>: å¦‚æœæ‰¾ä¸åˆ°åº“ï¼ŒCMake ä¼šæŠ¥é”™å¹¶åœæ­¢æ„å»ºã€‚å¦‚æœ <code>find_package</code> æˆåŠŸï¼Œä¼šå®šä¹‰ä¸€ä¸ª <code>&lt;package&gt;_FOUND</code> å˜é‡ï¼Œè¡¨ç¤ºæ‰¾åˆ°åº“ã€‚</li>
<li><code>OPTIONAL</code>: å¦‚æœæ‰¾ä¸åˆ°åº“ï¼ŒCMake ä¼šç»§ç»­æ„å»ºã€‚</li>
<li><code>QUIET</code>: å¤±è´¥æ—¶ä¸è¾“å‡ºè­¦å‘Šã€‚</li>
<li><code>PATHS</code> &amp; <code>HINTS</code>: æŒ‡å®šæŸ¥æ‰¾è·¯å¾„ï¼Œå…¶ä¸­ <code>HINTS</code> ä¼˜å…ˆçº§é«˜äº <code>PATHS</code>ã€‚</li>
<li><code>&lt;package&gt;_ROOT</code> å˜é‡æˆ–ç¯å¢ƒå˜é‡å¦‚æœè®¾ç½®ï¼Œä¼šä¼˜å…ˆä½¿ç”¨ã€‚</li>
</ul>
<blockquote>
<p>å…·ä½“æŸ¥æ‰¾é¡ºåºå‚è€ƒ <a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/command/find_package.html#find-package">CMake å®˜æ–¹æ–‡æ¡£</a> ğŸ’©</p>
</blockquote>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">find_package</span>(Boost) <span class="comment"># find boost library</span></span><br><span class="line"><span class="keyword">if</span>(Boost_FOUND)</span><br><span class="line">  <span class="keyword">message</span>(STATUS <span class="string">&quot;Boost found&quot;</span>)</span><br><span class="line"><span class="keyword">else</span>()</span><br><span class="line">  <span class="keyword">message</span>(FATAL_ERROR <span class="string">&quot;Boost not found&quot;</span>)</span><br><span class="line"><span class="keyword">endif</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">find_package</span>(OpenCV CONFIG REQUIRED) <span class="comment"># find opencv library</span></span><br><span class="line"><span class="keyword">find_package</span>(OpenGL REQUIRED HINTS /usr/lib) <span class="comment"># find opengl library</span></span><br></pre></td></tr></table></figure>
<h3 id="ctest">ctest</h3>
<p>ctest æ˜¯ CMake çš„æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥ç”¨äºè¿è¡Œæµ‹è¯•ã€‚å¯ä»¥é€šè¿‡ <code>add_test</code> æŒ‡ä»¤æ·»åŠ å¯¹åº”çš„æµ‹è¯•ã€‚ç­¾åå¦‚ä¸‹: <code>add_test(NAME &lt;test_name&gt; COMMAND &lt;executable&gt; [arg1 [arg2 ...]])</code></p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line"><span class="keyword">enable_testing</span>() <span class="comment"># enable testing</span></span><br><span class="line"><span class="keyword">add_executable</span>(<span class="keyword">test</span> <span class="keyword">test</span>.cpp) <span class="comment"># add test target</span></span><br><span class="line"><span class="keyword">add_test</span>(NAME example-<span class="keyword">test</span> <span class="keyword">COMMAND</span> <span class="keyword">test</span> config.yaml &gt; <span class="variable">$&#123;CMAKE_BINARY_DIR&#125;</span>/<span class="keyword">test</span>.log) <span class="comment"># add test</span></span><br></pre></td></tr></table></figure>
<h3 id="å¸¸ç”¨å˜é‡">å¸¸ç”¨å˜é‡</h3>
<ul>
<li>CMAKE_SOURCE_DIR: é¡¹ç›®æ ¹ç›®å½•</li>
<li>CMAKE_BINARY_DIR: é¡¹ç›®æ„å»ºç›®å½•</li>
<li>CMAKE_CURRENT_SOURCE_DIR: å½“å‰å¤„ç†çš„ CMakeLists.txt æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•</li>
<li>CMAKE_PREFIX_PATH: æŸ¥æ‰¾åº“çš„è·¯å¾„</li>
<li>CMAKE_MODULE_PATH: æŸ¥æ‰¾æ¨¡å—çš„è·¯å¾„</li>
<li>CMAKE_INCLUDE_PATH: æŸ¥æ‰¾å¤´æ–‡ä»¶çš„è·¯å¾„</li>
<li>CMAKE_LIBRARY_PATH: æŸ¥æ‰¾åº“æ–‡ä»¶çš„è·¯å¾„</li>
<li>CMAKE_INSTALL_PREFIX: å®‰è£…ç›®å½•</li>
<li>CMAKE_BUILD_TYPE: æ„å»ºç±»å‹ï¼Œå¦‚ Debugã€Releaseã€RelWithDebInfoã€MinSizeRel</li>
<li>CMAKE_C_COMPILER: C ç¼–è¯‘å™¨</li>
<li>CMAKE_CXX_COMPILER: C++ ç¼–è¯‘å™¨</li>
<li>CMAKE_C_FLAGS: C ç¼–è¯‘é€‰é¡¹</li>
<li>CMAKE_CXX_FLAGS: C++ ç¼–è¯‘é€‰é¡¹</li>
<li>CMAKE_EXE_LINKER_FLAGS: å¯æ‰§è¡Œæ–‡ä»¶é“¾æ¥é€‰é¡¹</li>
<li>CMAKE_LINKER_FLAGS: é“¾æ¥é€‰é¡¹</li>
</ul>
<h3 id="CMake-Cli">CMake Cli</h3>
<p>è™½ç„¶ CMake æœ‰æä¾› GUI å·¥å…·ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿˜æ˜¯ä½¿ç”¨å‘½ä»¤è¡Œå·¥å…·ã€‚CMake çš„å‘½ä»¤è¡Œå·¥å…·æ˜¯ cmakeï¼Œå¯ä»¥é€šè¿‡ cmake --help æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ã€‚</p>
<p>å¸¸ç”¨å‘½ä»¤è¡Œå‚æ•°ï¼š</p>
<ul>
<li><code>cmake -B&lt;build-dir&gt;</code>: æŒ‡å®šæ„å»ºç›®å½•</li>
<li><code>cmake &lt;source-dir&gt;</code>: æŒ‡å®šæºä»£ç ç›®å½•</li>
<li><code>cmake --build &lt;build-dir&gt;</code>: æ„å»ºé¡¹ç›®</li>
<li><code>cmake -D&lt;variable&gt;=&lt;value&gt;</code>: è®¾ç½®å˜é‡</li>
<li><code>ctest -C &lt;build-dir&gt;</code>: åœ¨æŒ‡å®šçš„æ„å»ºç›®å½•ä¸‹è¿è¡Œæµ‹è¯•</li>
</ul>
<h2 id="æ‹“å±•">æ‹“å±•</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.foonathan.net/2016/03/cmake-install/">è®© CMake install æ”¯æŒ find_package</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/microsoft/vcpkg">vcpkg</a></li>
<li><a target="_blank" rel="noopener" href="https://cmake.org/cmake/help/latest/command/target_precompile_headers.html">precompiled headers</a></li>
</ul>
<h2 id="åºŸè¯">åºŸè¯</h2>
<p>ç”±äº CMake è¯­æ³•è¿‡äºå¤æ‚ï¼Œå®é™…ä½¿ç”¨æ—¶åº”å¤šå»å®˜ç½‘æŸ¥æ‰¾ç”¨æ³•ã€‚ç½‘å€è´´åˆ°<a target="_blank" rel="noopener" href="https://cmake.org/documentation/">è¿™é‡Œ</a>ï¼Œä¸è¿‡å®˜ç½‘çš„æ–‡æ¡£æŸ¥æ‰¾æ•ˆç‡ä½ä¸‹ï¼Œä¸ªäººä¸€èˆ¬éƒ½æ˜¯æ‰¾å¤§å‹ cmake é¡¹ç›®ç›´æ¥æŠ„ CMakeLists.txt ï¼ˆ</p>
<p><img src="Image_1728729096791.jpg" alt="ğŸ˜†"></p>
<!--CMake è¯­æ³•æ˜¯ä¾æ‰˜ï¼Œå†å²é—ç•™å¤ªå¤š(æ”¯æŒ JAVA æ²¡çœ‹æ‡‚)ã€‚ä½†æ˜¯ç”±äºå…¶å­˜åœ¨å·²ä¹…ï¼Œå¤§é‡çš„å¼€æºåº“éƒ½ä½¿ç”¨ CMake ä½œä¸ºæ„å»ºå·¥å…·,åŠ ä¸Šç›®å‰æ¯”è¾ƒå¥½ç”¨çš„ C/C++ åŒ…ç®¡ç†åŒº `vcpkg` ä¹Ÿä½¿ç”¨ CMake ä½œä¸ºæ„å»ºå·¥å…·ï¼Œæ‰€ä»¥å­¦ä¹  CMake æ˜¯å¿…è¦çš„ã€‚-->

        </div>
        
<blockquote class="copyright">
    <p><strong>Link to this article : </strong><a class="permalink" href="http://blog.vollate.top/2024/10/12/cmake-introduction/">http://blog.vollate.top/2024/10/12/cmake-introduction/</a></p>
    <p><strong>This article is available under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0)</a> License</strong></p>
</blockquote>


    </article>
    
    <section id="comments">
        

        
    </section>


    

</main>


<aside style="" id="sidebar" class="aside aside-fixture">
    <div class="toc-sidebar">
        <nav id="toc" class="article-toc">
            <h3 class="toc-title">Catalogue</h3>
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E5%8F%91%E5%B1%95%E5%8E%86%E5%8F%B2"><span class="toc-number">1.</span> <span class="toc-text">æ„å»ºç³»ç»Ÿå‘å±•å†å²</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GNU-Make"><span class="toc-number">2.</span> <span class="toc-text">GNU Make</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CMake"><span class="toc-number">3.</span> <span class="toc-text">CMake</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Version"><span class="toc-number">3.1.</span> <span class="toc-text">Version</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Project"><span class="toc-number">3.2.</span> <span class="toc-text">Project</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Variable"><span class="toc-number">3.3.</span> <span class="toc-text">Variable</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Control-Flow"><span class="toc-number">3.4.</span> <span class="toc-text">Control Flow</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#if"><span class="toc-number">3.4.1.</span> <span class="toc-text">if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#loop"><span class="toc-number">3.4.2.</span> <span class="toc-text">loop</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Subdir"><span class="toc-number">3.5.</span> <span class="toc-text">Subdir</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Executable-Lib"><span class="toc-number">3.6.</span> <span class="toc-text">Executable&#x2F;Lib</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#include-directories"><span class="toc-number">3.7.</span> <span class="toc-text">include_directories</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#target-xxx"><span class="toc-number">3.8.</span> <span class="toc-text">target_xxx</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#find-package"><span class="toc-number">3.9.</span> <span class="toc-text">find_package</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ctest"><span class="toc-number">3.10.</span> <span class="toc-text">ctest</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-number">3.11.</span> <span class="toc-text">å¸¸ç”¨å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CMake-Cli"><span class="toc-number">3.12.</span> <span class="toc-text">CMake Cli</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%93%E5%B1%95"><span class="toc-number">4.</span> <span class="toc-text">æ‹“å±•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%9F%E8%AF%9D"><span class="toc-number">5.</span> <span class="toc-text">åºŸè¯</span></a></li></ol>
        </nav>
    </div>
</aside>





        </section>
        <footer class="hidden lg:block fixed bottom-0 left-0 sm:w-1/12 lg:w-1/6 bg-gray-100 z-40">
    
    <div class="footer-social-links">
        
            <a target="_blank" rel="noopener" href="https://github.com/vollate">
                <i class="iconfont icon-github"></i>
            </a>
        
            <a href="/atom.xml">
                <i class="iconfont icon-rss"></i>
            </a>
        
    </div>
    
    
        <p class="footer-custom">Freedom is the freedom to say that two plus two makes four</p>
        <p class="theme-brand">Theme by <a target="_blank" href="https://github.com/fengkx/hexo-theme-purer" rel="nofollow noopener noreferrer noopener">hexo-theme-purer</a></p>
    
</footer>

        <div id="mask" class="hidden mask fixed inset-0 bg-gray-900 opacity-75 z-40"></div>
        <div id="search-view-container" class="hidden shadow-xl"></div>
        
<script src="/js/dom-event.min.js"></script>



<script src="/js/local-search.min.js"></script>


    <script src="//cdn.jsdelivr.net/npm/gitalk@1.8.0/dist/gitalk.min.js"></script>
<script src="//cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: '346bd3ac57ee5e238afd',
        clientSecret: '786b6b92c2216fae1114b63adf3d10a49931ce6a',
        repo: 'Blog',
        owner: 'vollate',
        admin: ['vollate'],
        id: md5(location.pathname),
        distractionFreeMode: true
    })
    gitalk.render('comments')
</script>



    <script src="//cdn.jsdelivr.net/npm/lightgallery.js@1.1.3/dist/js/lightgallery.min.js"></script>
    
<script src="/js/light-gallery.min.js"></script>






    </body>
</html>
